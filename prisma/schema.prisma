generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  name      String           @id @db.VarChar(50)
  password  String           @db.VarChar(100)
  role      enum_Users_role?
  createdAt DateTime?        @default(now()) @db.Timestamptz(6)
  updatedAt DateTime?        @updatedAt @db.Timestamptz(6)
}

model targets {
  name           String           @id @db.VarChar(50)
  IP             String
  createdAt      DateTime?        @default(now()) @db.Timestamptz(6)
  updatedAt      DateTime?        @updatedAt @db.Timestamptz(6)
  targetContacts targetContacts[]
}

model targetContacts {
  id          Int    @id @default(autoincrement())
  target_name String @db.VarChar(50)
  username    String @db.VarChar(50)

  target targets @relation(fields: [target_name], references: [name], onDelete: NoAction, onUpdate: NoAction)
}

model alertLogs {
  id         Int         @id @default(autoincrement())
  nodeName   String      @db.VarChar(50)
  targetName String      @db.VarChar(50)
  method     enum_method?
  value      Int
  isSend     Boolean
  sendBy     enum_sendBy
  activeAt   DateTime
  createdAt  DateTime?   @default(now()) @db.Timestamptz(6)
  updatedAt  DateTime?   @updatedAt @db.Timestamptz(6)

}

enum enum_method {
  ping
  http_request
}

enum enum_sendBy {
  rocketChat
  sms
  notYetSend
}

enum enum_Users_role {
  ADMIN
  REPORTER
}
